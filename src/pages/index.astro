---
// src/pages/index.astro

// --- 1. 필요한 컴포넌트와 함수 가져오기 ---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';

// --- 2. 블로그 게시물 불러오기 및 정렬 ---
// 'blog' 컬렉션의 모든 글을 가져와서,
// 최신 날짜 순서대로 정렬합니다.
const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout title="Chriankim's Blog -Home-" description="Welcome to my Blog">
	
  <section class="mb-16">
    <h1 class="text-4xl md:text-5xl font-bold mb-4 leading-tight">
      안녕하세요, 김우성입니다.
    </h1>
    <p class="text-lg text-gray-600 dark:text-gray-400">
      MLOps와 솔루션 아키텍처에 대한 탐구와 성장을 기록합니다. 
      데이터와 코드를 통해 안정적이고 확장 가능한 시스템을 만드는 과정에 관심이 많습니다.
    </p>
  </section>

  <section>
    <h2 class="text-3xl font-bold mb-8 border-b pb-4">
      최신 포스트
    </h2>
    <ul class="space-y-8">
      {
        posts.map((post) => (
          <li>
            <a href={`/blog/${post.slug}/`} class="group">
              <h3 class="text-2xl font-semibold group-hover:text-indigo-500 transition-colors duration-200">
                {post.data.title}
              </h3>
              <p class="text-gray-500 dark:text-gray-400 mt-1">
                <FormattedDate date={post.data.pubDate} />
              </p>
              <p class="mt-3">
                {post.data.description}
              </p>
            </a>
          </li>
        ))
      }
    </ul>
  </section>

</BaseLayout>